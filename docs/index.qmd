---
title: "Regress√£o Chen"
subtitle: "Implementa√ß√µes Computacionais"
author: "Alisson Rosa"
format: 
    revealjs:
        theme: serif
        preview-links: auto
        chalkboard: true
        transition: fade
        controls: true

---

## O que vai ser falado

::: {.incremental}
- Modelagem Estat√≠stica

<br />

- Programa√ß√£o e [Pacotes](https://r-pkgs.org)

<br />

- Aplica√ß√£o web
:::



# Modelagem Estat√≠stica
::: {.incremental}
- Afinal, o que √© isso?



:::

## Modelagem

* Em Estat√≠stica, em geral, um **modelo** √© algo que recebe uma estrutura que cont√©m n√∫meros e devolve um n√∫mero.

## Tr√™s Componentes Principais

* Entrada


![](a-Grayscale-image-of-character-A-b-Binary-representation-of-character-A-c.ppm.png){.absolute top=410 left=310  width="450" height="250"}

```{r}
iris |> 
    head() 

```
---
## Fun√ß√£o 

$$
Y = \beta_0 + \beta_1X  + \epsilon
$$

![](https://1.cms.s81c.com/sites/default/files/2021-01-06/ICLH_Diagram_Batch_01_03-DeepNeuralNetwork-WHITEBG.png){.absolute top=190 right=10 width="450" height="490"}
![](https://mljar.com/blog/visualize-decision-tree/output_10_0.png){.absolute top=180 left=10 width="450" height="530"}

## Sa√≠da
 
Um n√∫mero:

\begin{align}
\text{Probabilidade} \rightarrow \text{Classifica√ß√£o}
\end{align}

\begin{align}
\text{N√∫mero Real} \rightarrow \text{Regress√£o}
\end{align}



## Modelos de Regress√£o Linear
* Uma regress√£o √© uma fun√ß√£o dos dados que tem como objetivo predizer um n√∫mero  
* Em regress√£o linear tentasse predizer a vari√°vel de interesse ($Y$) supondo que que as vari√°veis explicativas se relacionam linearmente com $Y$.

::: {.fragment .fade-in}
::: {.fragment .highlight-red}
Dados $\rightarrow$ Fun√ß√£o $\rightarrow$ N√∫mero
:::
:::


$$
Y = \beta_0 + \beta_1X_1  + \epsilon
$$


$$
Y = \beta_0 + \beta_1X_1 + \beta_2e^{(X_2)} + \epsilon
$$


## Pressupostos e Teoria
* Toda teoria possue pressupostos


$$
\text{Pressupostos} \rightarrow \text{Teoria}
$$

* Em regress√£o linear existem v√°rios, mas o principal a ser falado aqui √© sobre o pressuposto de normalidade do erro.

## Normalidade

* F√°cilidade para fazer Infer√™ncia
* Converg√™ncia dos estimadores


```{r}
library(ggplot2)
df <- data.frame(PF = 10*rnorm(1000))
ggplot(df, aes(x = PF)) + 
stat_function(fun = dnorm, args = list(mean = mean(df$PF), sd = sd(df$PF)))+
theme_bw()
```

## Proposta

* Desenvolver o modelo de regress√£o quant√≠lico Chen
* Reparametriza√ß√£o da distribui√ß√£o
* Estimador de M√°xima verossimilhan√ßa
* Res√≠duo Quant√≠lico

## {auto-animate=true auto-animate-easing="ease-in-out"}

::: {.r-hstack}
::: {data-id="box1" auto-animate-delay="0" style="background: #EF3508; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box2" auto-animate-delay="0.1" style="background: #3fb618; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box3" auto-animate-delay="0.2" style="background: #e83e8c; width: 200px; height: 150px; margin: 10px;"}
:::
:::

## {auto-animate=true auto-animate-easing="ease-in-out"}

::: {.r-stack}
::: {data-id="box1" style="background: #EF3508; width: 350px; height: 350px; border-radius: 200px;"}
:::

::: {data-id="box2" style="background: #3fb618; width: 250px; height: 250px; border-radius: 200px;"}
:::

::: {data-id="box3" style="background: #e83e8c; width: 150px; height: 150px; border-radius: 200px;"}
:::
:::




# Programa√ß√£o e Pacotes

## Why I need this?
* **Outras** pessoas usarem
* Escolha de design


```r
modelo <- f(dados, formula, quantil, link)
```
* O que o objeto retorna quando foi ajustado?
* Como resumir a informa√ß√£o?

# Compara√ß√£o
::: {.panel-tabset}

### Meu modelo
```r
modelo = chen_reg.fit(Y ~ ., data = chenReg::simu[, -1], tau = 0.5, link = "log")
modelo

```
```{r}

library(chenReg)
chen_reg.fit(Y ~ ., data = chenReg::simu[, -1], tau = 0.5, link = "log")
```
### Linear model
```r
linear = lm(formula = y ~ x, data = dados)
linear
```
```{r}
x = 1:16 
y = 2*x + 3
dados = data.frame(x=x,y=y)

lm(y~x, data = dados)
```

:::



# Resumo do ajuste

::: {.panel-tabset}

### Meu modelo

```{.python code-line-numbers="|1-6|"}
#>             Estimate Std. Error  z value Pr(>|z|)
#> lambda        0.9690     0.0162  59.9251        0
#> (Intercept)  -0.1632     0.0254   6.4333        0
#> V2            2.5776     0.0179 144.1890        0
#> V3           -2.0559     0.0156 131.4870        0
#> V4            3.1060     0.0218 142.7914        0
#>  
#> Log-likelihood: -429.106 
#> Number of iterations in BFGS optim: 95 
#> AIC: 868.212  BIC: 886.7309  RMSE: 1.3304 
#> Residuals:
#>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#> -3.0327 -0.8555 -0.1335 -0.1578  0.4892  2.3589 
#> R-squared: 0.9841

```
### Linear model
```r
#> Call:
#> lm(formula = y ~ x)
#> 
#> Residuals:
#>        Min         1Q     Median         3Q        Max 
#> -7.277e-16 -3.862e-16 -2.228e-16  1.521e-16  1.283e-15 
#> 
#> Coefficients:
#>              Estimate Std. Error   t value Pr(>|t|)    
#> (Intercept) 3.000e+00  3.204e-16 9.363e+15   <2e-16 ***
#> x           2.000e+00  3.314e-17 6.036e+16   <2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
#> 
#> Residual standard error: 6.11e-16 on 14 degrees of freedom
#> Multiple R-squared:      1,  Adjusted R-squared:      1 
#> F-statistic: 3.643e+33 on 1 and 14 DF,  p-value: < 2.2e-16
```
:::
## Um mundo melhor
* Um oferecimento [mypdf1](https://github.com/AlissonRP/mypdf1)




```{r}

modelo = chen_reg.fit(Y ~ ., data = chenReg::simu[, -1], tau = 0.5, link = "log")

chenReg::chen_summary(modelo) |> 
mypdf1::pdf1_tbl('')
```


![](https://github.com/AlissonRP/mypdf1/blob/main/man/figures/fig/mypdf1.png?raw=true){.absolute top=20 right=50 width="150" height="150"}


## Elementos fundamentais de um Pacote
* Documenta√ß√£o




* Depend√™ncias


* Testes
```r
#> Test passed üò∏
```
<br />

* Automatiza√ß√£o




# Aplica√ß√£o web



## Por qu√™ n√£o ficar somente no pacote?

* Localmente
* Mais f√°cil?
* Consequ√™ncia: Atinge um p√∫blico maior  
* Shiny



## {background-iframe="https://alissonrp.shinyapps.io/full_app/?_ga=2.83236885.2012925531.1652155237-1564274603.1652155237" background-interactive="true"}


## Quando algo termina, algo come√ßa.

::: {.incremental}

:::
![](https://i.imgur.com/KIuSkwe.gif){.absolute top=310 left=370 width="380" height="250"}

::: footer
N√£o use Beamer
:::

## Refer√™ncias

![](https://images-na.ssl-images-amazon.com/images/I/71NMYEJefqL.jpg){.absolute top=90 left=10 width="280" height="350"}
![](https://images-na.ssl-images-amazon.com/images/I/41Ef5vs3aOS._SX379_BO1,204,203,200_.jpg){.absolute top=90 right=10 width="280" height="350"}
![](https://m.media-amazon.com/images/I/51eTKL+SkeL.jpg){.absolute top=300 right=370 width="280" height="320"}


::: footer
In Hadley Wickham we trust
:::